# OSI七层模型

---



| OSI七层模型   | TCP/IP四层模型 | 功能                                                      | TCP/IP协议族                       |
| :------------ | :------------- | --------------------------------------------------------- | :--------------------------------- |
| ==应用层==    |                | 文件传输、电子邮件、文件服务、虚拟终端                    | TFTP、HTTP、FTP、SMTP、DNS、TELNET |
| ==表示层==    |                | 数据格式化、代码转换、数据加密                            |                                    |
| ==会话层==    | ==应用层==     | 解除或建立与别的接点的联系                                |                                    |
| **传输层**    | **传输层**     | 提供端对端的接口                                          | TCP、UDP                           |
| <u>网络层</u> | <u>网络层</u>  | 以数据包选择路由、逻辑链路寻址：路由器                    | IP、ICMP、OSPF、BGP                |
| *数据链路层*  |                | 传输有地址的帧以及错误检测功能、物理链路寻址：交换机MAC表 | SLIP、CSLIP、PPP、MTU              |
| *物理层*      | *网路接口层*   | 以二进制数据形式在物理媒体上传输数据、比特流              | ISO2110、IEEE802、IEEE802.2        |



### IP地址

对于**IP地址**，大家并不陌生，特别是在网络访问中我们会经常使用到（平时对域名如百度的`www.baidu.com`的访问，本质就是对域名所绑定的**IP地址**的访问），那么**IP地址**是什么呢？

首先，我们要知道网络中的相互访问其实就是在进行两者间的**数据传递**。就如同送快递一样，快递发出只有知道你的住址信息，才能将快递送到你的手中。而在网络访问时，只有知道你在网络中的地址信息，才能将数据发送到你的设备上。所以，**IP地址**就是你在网络中的地址信息。与你现实地址不同的是，你的现实地址使用文字表示，而你在网络中的地址（**IP地址**）是用二进制数字表示的。

## 简要的了解下公网与内网中的IP地址

一般我们会将网络划分**公网（连Internet的）**与**内网**。

### 公有IP地址

一般称公网中的**IP地址**为公有地址。公有地址由Inter NIC（因特网信息中心）负责，这些**IP地址**分配给**注册**并向Inter NIC提出申请的组织机构。公有地址是全球唯一的，公网中不可能存在两个相同的**IP地址**。

**范围**：除了私有地址以外的地址，都属于公有地址

### 私有IP地址

一般称内网（即局域网）中的**IP地址**为私有地址。私有地址是**非注册地址**，用于组织机构内部使用。私有地址的范围如下：

- A类IP地址中：10.0.0.0--10.255.255.255
- B类IP地址中：172.16.0.0--172.31.255.255
- C类IP地址中：192.168.0.0--192.168.255.255

私有地址与公有地址不同，并不是由**Internet**分配的，是不允许出现在**Internet**中的，我们在公网中是看不到**私有IP地址**的，并且公有地址也不会使用上述的三类地址。所以，私有地址是不能直接与**Internet**连接的。

而如果想用私有地址与Internet连接来访问公网，那该怎么做？这就需要将**私有IP地址**转换成**公网IP地址**，与外部连接。所以，我们平时使用的路由器中会装有一个叫做 **NAT（网络地址转换）** 的软件，我们的路由器中会至少会有一个有效的**公网IP**，**NAT**会将我们的**私有地址**转成路由器中的**公网IP**与外部Internet连接。而同样的，因为使用的是路由器中的**公共的公网IP**来连接Internet，所以这个内网中的PC在Internet中显示的都是路由器的**公共IP**，这样做不仅提供了一定程度的安全，也可以有效的减缓可用的IP地址空间的枯竭问题。（像我们学校或者公司的内网一般都是这么做的）

另外还有一点，在同一个局域网内，IP地址是唯一的；但是在不同的局域网内，IP地址是可以重复出现的。

> **举个小例子:** 在**局域网A**中，有个主机的**IP地址**是`192.168.10.128`，那么绝不可能在**局域网A**中还有其他主机的**IP地址**为`192.168.10.128`。但是在**局域网B**中却可以有主机的**IP地址**也是`192.168.10.128`。
>  如果**局域网A**中的`192.168.10.128`**主机**与**局域网B**中的`192.168.10.128`**主机**通信，不会冲突吗？不会，因为上述说过，它们最终都是使用路由器中的`公网IP`来连接外网的，而`公网IP`是全球唯一的。

## localhost、127.0.0.1和0.0.0.0和本机IP的区别

### localhost

**localhost**其实是`域名`，一般windows系统默认将**localhost**指向`127.0.0.1`，但是**localhost**并不等于`127.0.0.1`，**localhost**指向的**IP地址**是可以配置的

### 127.0.0.1

首先我们要先知道一个概念，凡是以`127`开头的**IP地址**，都是**回环地址（Loop back address）**，其所在的回环接口一般被理解为虚拟网卡，并不是真正的路由器接口。

所谓的回环地址，通俗的讲，就是我们在主机上发送给`127`开头的**IP地址**的数据包会被发送的主机自己接收，根本传不出去，外部设备也无法通过回环地址访问到本机。

> **小说明**：正常的`数据包`会从`IP层`进入`链路层`，然后发送到`网络`上；而给`回环地址`发送`数据包`，`数据包`会直接被发送主机的`IP层`获取，后面就没有`链路层`他们啥事了。

而`127.0.0.1`作为`{127}`集合中的一员，当然也是个回环地址。只不过`127.0.0.1`经常被默认配置为**localhost**的**IP地址**。
 一般会通过`ping 127.0.0.1`来测试某台机器上的网络设备是否工作正常。

### 0.0.0.0

首先，`0.0.0.0`是不能被`ping`通的。在服务器中，`0.0.0.0`并不是一个真实的的**IP地址**，它表示本机中所有的**IPV4地址**。监听`0.0.0.0`的端口，就是监听本机中所有**IP**的端口。

### 本机IP

**本机IP**通常仅指在同一个局域网内，能同时被外部设备访问和本机访问的那些**IP地址**（可能不止一个）。像`127.0.0.1`这种一般是不被当作**本机IP**的。**本机IP**是与具体的网络接口绑定的，比如以太网卡、无线网卡或者PPP/PPPoE拨号网络的虚拟网卡，想要正常工作都要绑定一个地址，否则其他设备就不知道如何访问它。

### 小例子剧场（帮助理解本机IP、127.0.0.1和0.0.0.0）

现在有两台pc在同一个局域网内，分别为pc1与pc2，pc1上有一个网卡，IP地址为`192.168.10.128`

- pc1中sever监听`127.0.0.1`，则pc1中的client可以连上`127.0.0.1`，`192.168.10.128`连不上；而pc2中client都连不上。
- pc1中sever监听`192.168.10.128`，则pc1中的client可以连上`192.168.10.128`，`127.0.0.1`连不上；而pc2中client能连上`192.168.10.128`。
- pc1中sever监听`0.0.0.0`，则pc1中的client可以连上`127.0.0.1`和`192.168.10.128`，pc2中的client能连上`192.168.10.128`。